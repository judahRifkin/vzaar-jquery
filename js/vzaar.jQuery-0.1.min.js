(function(a){a.fn.vzPrerollinator=function(j){var d=this,b=d.attr("id").match(/\d{1,7}/)[0],f=a.extend({pre:"958317",prerollDone:!1,mainDone:!1,prevars:"",mainvars:""},j);this.queue(function(){setTimeout(function(){var a=vzInit(d.attr("id"));a.ready(function(){a.addEventListener("playState",function(a){"mediaStarted"==a&&!f.prerollDone?(a={id:d.attr("id"),newId:f.pre,flashvars:f.prevars},vzEmbed(a),f.prerollDone=!0):"mediaEnded"==a&&!f.mainDone&&(a={id:d.attr("id"),newId:b,flashvars:f.mainvars},vzEmbed(a),
f.mainDone=!0,d.dequeue())})})},500)});return this};a.fn.vzPostrollinator=function(j){var d=this;d.attr("id").match(/\d{1,7}/);var b=a.extend({post:"958317",postvars:"",mainDone:!1},j);this.queue(function(){setTimeout(function(){var a=vzInit(d.attr("id"));a.ready(function(){a.addEventListener("playState",function(a){"mediaEnded"==a&&!b.mainDone&&(a={id:d.attr("id"),newId:b.post,flashvars:b.postvars},vzEmbed(a),b.mainDone=!0,d.dequeue())})})},500)});return this};a.fn.vzBookmarkifier=function(j){var d=
0,b=a(this),f=a.extend({persistent:!1,message:"Really? :("},j),g=vzInit(this.attr("id"));b.after('<div class="vzBookmark"><a href="#" class="vzAddBookmark">Add Bookmark</a> | <a href="#" class="vzResetBookmark">Reset Bookmark</a> | Current bookmark: <span class="vzCurrentBookmark">00:00</span></div>');g.ready(function(){function b(c){a.cookie("bookmark",c,{expires:1});c=c.toString();a(".vzCurrentBookmark").html(timeConvert(c))}g.addEventListener("playState",function(c){"mediaStarted"==c&&g.seekTo(a.cookie("bookmark"))});
d=a.cookie("bookmark")?a.cookie("bookmark").toString():0;1==d.length&&(d="&nbsp;"+d);a(".vzCurrentBookmark").html(timeConvert(d));a(".vzAddBookmark").on("click",function(){g.getTime(function(a){isNaN(a)&&(a=0);b(a)})});a(".vzResetBookmark").on("click",function(){a.cookie("bookmark",0);b(0)});f.persistent&&(window.onbeforeunload=function(){g.getTime(function(a){isNaN(a)&&(a=0);b(a)});return f.message})});return this};a.fn.vzChapterizer=function(j){var d=this,b=a(d),f=0,g=0,k=!1,c=a.extend({appendTimes:!1,
chapters:[],titles:[],orientation:"vertical",position:"right",chapterNumbers:!1},j),h=vzInit(d.attr("id")),e=c.chapters,m=[];b.wrap('<div class="vzContainer" />');"top"===c.position||"left"===c.position?b.before('<ul id="vzChapters"></ul>'):("bottom"===c.position||"right"===c.position)&&b.after('<ul id="vzChapters"></ul>');a("#vzChapters").addClass(c.orientation).addClass(c.position);a.each(c.titles,function(a,b){c.chapterNumbers?m.push("<li>"+(a+1)+'. <a href="#">'+b+"</a></li>"):m.push('<li><a href="#">'+
b+"</a></li>")});a("#vzChapters").append(m.join(""));("left"===c.position||"right"===c.position)&&a(".vzContainer").css("width",function(){return a("#vzChapters").outerWidth()+(1*b.attr("width")+8)});var l=a("#vzChapters li");l.first().addClass("current");c.appendTimes&&l.each(function(c){a(this).append(' <span class="vzChaptersAppendTimes">'+timeConvert(e[c])+"</span>")});h.ready(function(){function c(){h.getTime(function(a){d.data("time",a)});b(d.data("time"))&&(k=!1,l.removeClass("current").eq(g).addClass("current"))}
function b(a){if(e[g+1]<a)k=!0,g++,b(a);else if(e[g]>a)k=!0,g--,b(a);else return k}h.addEventListener("playState",function(a){"mediaStarted"==a?f=setInterval(c,1E3):"mediaEnded"==a&&clearInterval(f)});h.addEventListener("interaction",function(a){"pause"==a?clearInterval(f):"resume"==a&&(f=setInterval(c,1E3))});l.on("click",function(b){h.play2();h.seekTo(e[l.index(a(this))]);clearInterval(f);f=setInterval(c,1E3);b.preventDefault()})});return this};a.fn.vzPlaycountattacher=function(){var j=this,d="http://vzaar.com/api/videos/"+
j.attr("id").match(/\d{1,7}/)[0]+".json?callback=?";a.getJSON(d,function(b){b&&(b=1===b.play_count?b.play_count+" play":b.play_count+" plays",a(j).after('<div class="vzPlaycount">'+b+"</div>"))});return this}})(jQuery);function vzInit(a){return new vzPlayer(a)}function vzEmbed(a){var j="http://view.vzaar.com/"+a.newId+"/player?apiOn=true&autoplay=true&"+a.flashvars;$("#"+a.id).parent().fadeOut("slow").promise().done(function(){$("#"+a.id).attr("src",j);$(this).delay(2E3).fadeIn("slow")})}
function timeConvert(a){isNaN(a)&&(a=0);a=parseInt(a);mins=Math.floor(a/60).toString();secs=(a%60).toString();1===mins.length&&(mins="0"+mins);1===secs.length&&(secs="0"+secs);return mins+":"+secs}
(function(a,j,d){function b(a){return a}function f(a){return decodeURIComponent(a.replace(g," "))}var g=/\+/g,k=a.cookie=function(c,h,e){if(h!==d){e=a.extend({},k.defaults,e);null===h&&(e.expires=-1);if("number"===typeof e.expires){var g=e.expires,l=e.expires=new Date;l.setDate(l.getDate()+g)}h=k.json?JSON.stringify(h):String(h);return j.cookie=[encodeURIComponent(c),"=",k.raw?h:encodeURIComponent(h),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+
e.domain:"",e.secure?"; secure":""].join("")}h=k.raw?b:f;e=j.cookie.split("; ");for(g=0;l=e[g]&&e[g].split("=");g++)if(h(l.shift())===c)return c=h(l.join("=")),k.json?JSON.parse(c):c;return null};k.defaults={};a.removeCookie=function(b,d){return null!==a.cookie(b)?(a.cookie(b,null,d),!0):!1}})(jQuery,document);
