(function(a){a.fn.vzPrerollinator=function(k){var c=this,g=c.attr("id").match(/\d{1,7}/)[0],e=a.extend({pre:"958317",prerollDone:!1,mainDone:!1,prevars:"",mainvars:""},k);this.queue(function(){setTimeout(function(){var a=vzInit(c.attr("id"));a.ready(function(){a.addEventListener("playState",function(a){"mediaStarted"==a&&!e.prerollDone?(a={id:c.attr("id"),newId:e.pre,flashvars:e.prevars},vzEmbed(a),e.prerollDone=!0):"mediaEnded"==a&&!e.mainDone&&(a={id:c.attr("id"),newId:g,flashvars:e.mainvars},vzEmbed(a),
e.mainDone=!0,c.dequeue())})})},500)});return this};a.fn.vzPostrollinator=function(k){var c=this;c.attr("id").match(/\d{1,7}/);var g=a.extend({post:"958317",postvars:"",mainDone:!1},k);this.queue(function(){setTimeout(function(){var a=vzInit(c.attr("id"));a.ready(function(){a.addEventListener("playState",function(a){"mediaEnded"==a&&!g.mainDone&&(a={id:c.attr("id"),newId:g.post,flashvars:g.postvars},vzEmbed(a),g.mainDone=!0,c.dequeue())})})},500)});return this};a.fn.vzBookmarkifier=function(k){var c=
0,g=a(this),e=a.extend({persistent:!1,message:"Really? :("},k),f=vzInit(this.attr("id"));g.after('<div class="vzBookmark"><a href="#" class="vzAddBookmark">Add Bookmark</a> | <a href="#" class="vzResetBookmark">Reset Bookmark</a> | Current bookmark: <span class="vzCurrentBookmark">00:00</span></div>');f.ready(function(){function j(b){a.cookie("bookmark",b,{expires:1});b=b.toString();a(".vzCurrentBookmark").html(timeConvert(b))}f.addEventListener("playState",function(b){console.log(b);"mediaStarted"==
b&&f.seekTo(a.cookie("bookmark"))});c=a.cookie("bookmark")?a.cookie("bookmark").toString():0;1==c.length&&(c="&nbsp;"+c);a(".vzCurrentBookmark").html(timeConvert(c));a(".vzAddBookmark").on("click",function(){f.getTime(function(a){isNaN(a)&&(a=0);j(a)})});a(".vzResetBookmark").on("click",function(){a.cookie("bookmark",0);j(0)});e.persistent&&(window.onbeforeunload=function(){f.getTime(function(a){isNaN(a)&&(a=0);j(a)});return e.message})});return this};a.fn.vzChapterizer=function(k){var c=this,g=a(c),
e=0,f=0,j=!1,b=a.extend({appendTimes:!1,chapters:[],titles:[],orientation:"vertical",position:"right",chapterNumbers:!1},k),h=vzInit(c.attr("id")),d=b.chapters,m=[];"top"===b.position||"left"===b.position?g.before('<ul id="vzChapters"></ul>'):("bottom"===b.position||"right"===b.position)&&g.after('<ul id="vzChapters"></ul>');a("#vzChapters").addClass(b.orientation).addClass(b.position);a.each(b.titles,function(a,c){b.chapterNumbers?m.push("<li>"+(a+1)+'. <a href="#">'+c+"</a></li>"):m.push('<li><a href="#">'+
c+"</a></li>")});a("#vzChapters").append(m.join(""));var l=a("#vzChapters li");l.first().addClass("current");b.appendTimes&&l.each(function(b){a(this).append(' <span class="vzChaptersAppendTimes">'+timeConvert(d[b])+"</span>")});h.ready(function(){function b(){h.getTime(function(a){c.data("time",a)});g(c.data("time"))&&(j=!1,l.removeClass("current").eq(f).addClass("current"))}function g(a){if(d[f+1]<a)j=!0,f++,g(a);else if(d[f]>a)j=!0,f--,g(a);else return j}h.addEventListener("playState",function(a){"mediaStarted"==
a?e=setInterval(b,1E3):"mediaEnded"==a&&clearInterval(e)});h.addEventListener("interaction",function(a){"pause"==a?clearInterval(e):"resume"==a&&(e=setInterval(b,1E3))});l.on("click",function(c){h.play2();h.seekTo(d[l.index(a(this))]);clearInterval(e);e=setInterval(b,1E3);c.preventDefault()})});return this}})(jQuery);function vzInit(a){return new vzPlayer(a)}
function vzEmbed(a){var k="//view.vzaar.com/"+a.newId+"/player?apiOn=true&autoplay=true&"+a.flashvars;$("#"+a.id).parent().fadeOut("slow").promise().done(function(){$("#"+a.id).attr("src",k);$(this).delay(2E3).fadeIn("slow")})}function timeConvert(a){isNaN(a)&&(a=0);a=parseInt(a);mins=Math.floor(a/60).toString();secs=(a%60).toString();1===mins.length&&(mins="0"+mins);1===secs.length&&(secs="0"+secs);return mins+":"+secs}
(function(a,k,c){function g(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g,j=a.cookie=function(b,h,d){if(h!==c){d=a.extend({},j.defaults,d);null===h&&(d.expires=-1);if("number"===typeof d.expires){var f=d.expires,l=d.expires=new Date;l.setDate(l.getDate()+f)}h=j.json?JSON.stringify(h):String(h);return k.cookie=[encodeURIComponent(b),"=",j.raw?h:encodeURIComponent(h),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+
d.domain:"",d.secure?"; secure":""].join("")}h=j.raw?g:e;d=k.cookie.split("; ");for(f=0;l=d[f]&&d[f].split("=");f++)if(h(l.shift())===b)return b=h(l.join("=")),j.json?JSON.parse(b):b;return null};j.defaults={};a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}})(jQuery,document);
